{% load static %}
<!doctype html>
<html lang="en-ca" data-bs-theme="{{preference_mode}}">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/css/ion.rangeSlider.min.css"/>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
        
        <link rel="stylesheet" type="text/css" href="{% static 'budgetdb/style.css' %}">
        <link rel="shortcut icon" href="{% static 'budgetdb/favicon.ico' %}"/>

        <style>
            /* Fix for IonRangeSlider in collapsed Navbars */
            .navbar-collapse .irs {
                margin-top: 11px;
                margin-bottom: 11px;
            }
        </style>

        {% block headblock %}{% endblock %}
        <title>{% block title %}The I'm not crazy, you're crazy! Budget{% endblock %}</title>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js" 
                integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK" 
                crossorigin="anonymous">
        </script>
    </head>

    <body style="padding-top: 80px;">
        {% csrf_token %}
        
        {% block navtools %}
            {% include "budgetdb/_navbar.html" %}
        {% endblock %}

        <div class="container-fluid px-md-5 my-4"> 
            {% block content %}{% endblock %} 
        </div>

        {% include "budgetdb/_instructions_modal.html" %}

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" 
                integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" 
                crossorigin="anonymous">
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/js/ion.rangeSlider.min.js" 
                integrity="sha384-/AX6fHrYAVafqe3PfZYh/72cCU1Ju5U9yctSfrLUlMmBc77i6Q8EO4gJNpQ31m88" 
                crossorigin="anonymous">
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"
                integrity="sha384-JnbsSLBmv2/R0fUmF2XYIcAEMPHEAO51Gitn9IjL4l89uFTIgtLF1+jqIqqd9FSk"
                crossorigin="anonymous">
        </script>
        <script src="{% static 'django_select2/django_select2.js' %}"></script>
        <script src="{% static 'js/jquery.bootstrap.modal.forms.js' %}"></script>
        
        <script>
            // Create a global config object with Django variables
            window.DjangoConfig = {
                isAuthenticated: {{ user.is_authenticated|yesno:"true,false" }},
                urls: {
                    cattype_list: "{% url 'budgetdb:cattype_list_json' %}",
                    cattype_pie: "{% url 'budgetdb:cattype_pie' 12345 %}",
                    cattype_bar: "{% url 'budgetdb:cattype_bar' 12345 %}",
                    account_list: "{% url 'budgetdb:account_list_detailed_view_json' %}",
                    account_activity: "{% url 'budgetdb:list_account_activity' 12345 %}",
                    accountcat_list: "{% url 'budgetdb:accountcat_view_list_json' %}",
                    timeline_chart: "{% url 'budgetdb:timeline_chart' %}",
                    preferences: "{% url 'budgetdb:preferences_json' %}",
                    set_interval: "{% url 'budgetdb:setinterval_json' %}"
                }
            };
        </script>
        <script src="{% static 'budgetdb/js/base.js' %}" defer></script>

        {% block script %}{% endblock %}
    </body>
</html>