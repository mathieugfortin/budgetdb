{% extends "budgetdb/base.html" %}
{% load static %}
{% block content %}
    <!--firstgraph v2-->
    <h1>Account Categories</h1>
    <div class="clearfix">
        {% for account_category in accountcategories  %}
        <a class="btn btn-info left" href="{% url 'budgetdb:line_chart' %}?begin={{ begin }}&end={{ end }}&ac={{ account_category.id }}"> {{account_category.name}} </a>
        {% endfor %}
        <a class="btn btn-info left" href="{% url 'budgetdb:line_chart' %}?begin={{ begin }}&end={{ end }}"> All </a>
    </div>
    <h1>Time Range</h1>
    <div class="clearfix">
        <a class="btn btn-info left" href="{% url 'budgetdb:line_chart' %}?begin=2020-03-01&end=2021-03-15&ac={{ ac }}"> all </a>
        <a class="btn btn-info left" href="{% url 'budgetdb:line_chart' %}?begin=2019-12-31&end=2020-12-31&ac={{ ac }}"> 2020 </a>
        <a class="btn btn-info left" href="{% url 'budgetdb:line_chart' %}?begin=2020-12-31&end=2021-12-31&ac={{ ac }}"> 2021 </a>
        <a class="btn btn-info left" href="{% url 'budgetdb:line_chart' %}?begin={{ yearago }}&end={{ now }}&ac={{ ac }}"> past year </a>
        <a class="btn btn-info left" href="{% url 'budgetdb:line_chart' %}?begin={{ 3monthsago }}&end={{ now }}&ac={{ ac }}"> past 3 months </a>
        <a class="btn btn-info left" href="{% url 'budgetdb:line_chart' %}?begin={{ monthago }}&end={{ now }}&ac={{ ac }}"> past month </a>
        <a class="btn btn-info left" href="{% url 'budgetdb:line_chart' %}?begin={{ now }}&end={{ inamonth }}&ac={{ ac }}"> next month </a>
        <a class="btn btn-info left" href="{% url 'budgetdb:line_chart' %}?begin={{ now }}&end={{ in3months }}&ac={{ ac }}"> next 3 months </a>
        <a class="btn btn-info left" href="{% url 'budgetdb:line_chart' %}?begin={{ now }}&end={{ inayear }}&ac={{ ac }}"> next year </a>
    </div>
    <h1>{{ begin }} to {{ end }}</h1>

    <canvas id="myChart" width="900" height="500"></canvas>

{% endblock %}

{% block script %}
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.0.min.js"></script>
    <script type="text/javascript" src="{% static 'js/Chart.min.js' %}"></script>
    <script type="text/javascript">
        $.get('{% url "budgetdb:line_chart_json" %}?begin={{ begin }}&end={{ end }}&ac={{ ac }}', function(data) {
            var ctx = $("#myChart").get(0).getContext("2d");
            new Chart(ctx, {
                type: 'line', data: data
            });
        });
    </script>
{% endblock %}