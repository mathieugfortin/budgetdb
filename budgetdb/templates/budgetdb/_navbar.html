{% load static %}
<nav class="navbar navbar-expand-lg fixed-top bg-body-tertiary">
    <div class="container-fluid">
    <a class="navbar-brand" href="{% url 'budgetdb:home' %}">Budget</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    {% if user.is_authenticated %}
        {% if user.email_verified %}
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Config
                    </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="{% url 'budgetdb:list_accounthost' %}">Account Hosts</a>
                        <a class="dropdown-item" href="{% url 'budgetdb:list_account_simple' %}">Accounts</a>
                        <a class="dropdown-item" href="{% url 'budgetdb:list_accountcategory' %}">Account Categories</a>
                        <a class="dropdown-item" href="{% url 'budgetdb:list_cat1' %}">Categories</a>                        
                        <a class="dropdown-item" href="{% url 'budgetdb:list_cat2' %}">Subcategories</a>                        
                        <a class="dropdown-item" href="{% url 'budgetdb:list_cattype' %}">Category Type</a>                        
                        <a class="dropdown-item" href="{% url 'budgetdb:list_vendor' %}">Vendors</a>
                        <a class="dropdown-item" href="{% url 'budgetdb:list_be' %}">Recurring Events</a>
                        <a class="dropdown-item" href="{% url 'budgetdb:list_joinedtransactions' %}">Joined Transactions</a>
                        <a class="dropdown-item" href="{% url 'budgetdb:list_statement' %}">Statements</a>
                        <a class="dropdown-item" href="{% url 'budgetdb:list_template' %}">Templates</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Transactions
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown" id="transaction_menu">
                        <a class="dropdown-item" href="{% url 'budgetdb:create_transaction' %}">* Create transaction *</a>
                        <a class="dropdown-item" href="{% url 'budgetdb:list_transaction2' %}">All transaction</a>     
                        <a class="dropdown-item" href="{% url 'budgetdb:upload_transactions_OFX' %}">Import ODX file</a>     
<!--                        <a class="dropdown-item" href="{% url 'budgetdb:calendar_transaction' %}">Calendar</a>           removed, need to think about permissions       -->
                    </div>
                </li>
    <!--            <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Transactions per categories
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown" id="categories_menu">
                    </div>
                </li>  -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Accounts
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown" id="account_menu">
                        <a class="dropdown-item" href="{% url 'budgetdb:list_account_summary' %}">summary</a>
                        <div class="dropdown-divider"></div>
                    </div>
                    
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Bar Chart
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown" id="bar_chart_menu">
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Pie Chart
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown" id="pie_chart_menu">
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Timeline
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown" id="timeline_menu">
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Checks
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown" id="checks_menu">
                        <a class="dropdown-item" href="{% url 'budgetdb:list_unverified_transaction' %}">Old Unverified</a>
                        <a class="dropdown-item" href="{% url 'budgetdb:list_manual_transaction' %}">Manual</a>
                        <a class="dropdown-item" href="{% url 'budgetdb:list_deleted_transaction' %}">Deleted</a>
                        <a class="dropdown-item" href="{% url 'budgetdb:list_anormal_be' %}">Recurrent no transaction</a>
                        <a class="dropdown-item" href="{% url 'budgetdb:list_anormal2_be' %}">Recurrent no unverified</a>
                        <a class="dropdown-item" href="{% url 'budgetdb:list_anormal3_be' %}">Recurrent stops short of timeline</a>
                    </div>
                </li>
            </ul>
            <ul class="navbar-nav flex-grow-1 mx-lg-3"> 
                <li class="nav-item w-100"> 
                    <div class="px-3 px-lg-0"> <input id="input_range" type="text" class="js-range-slider" name="my_range" value=""/>
                    </div>
                </li>
            </ul>
            <ul class="navbar-nav">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        {{ user.get_short_name }}
                    </a>
                    <div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown" >
                        <a class="dropdown-item" href="{% url 'budgetdb:update_preferences' %}">Preference</a>
                        <a class="dropdown-item" href="{% url 'budgetdb:list_invitation' %}">Sharing</a>
                        <a class="dropdown-item" href="{% url 'budgetdb:password_update' %}">Change Password</a>
                        <a class="dropdown-item" href=#>
                        <a class="nav-link" href="#" onclick="openHelp('tab-recurring')">Help</a>
                        </a>
                        <a class="dropdown-item">
                            <form id="logout-form" method="post" action="{% url 'budgetdb:logout' %}" class="px-3">
                                {% csrf_token %}
                                <button type="submit" class="dropdown-item p-0">Log out</button>
                            </form>
                        </a>
                    </div>
                </li>
            </ul>
        </div>
        {% else %}  <!-- authenticated but email unverified  -->
        <div class="collapse navbar-collapse justify-content-center" id="navbarSupportedContent">
            <ul class="navbar-nav ">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Please verify your email address</a>
                </li>
            </ul>
        </div>
        <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
            <ul class="navbar-nav ">
                        <li class="nav-item active">
                        <a class="nav-link" href="{% url 'budgetdb:send_email_verification' %}?next={% url 'budgetdb:home' %}">Re-send verification email</a>
                </li>
            </ul>
        </div>
        {% endif %}    
    {% else %}   <!-- not authenticated  -->
    <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
        <ul class="navbar-nav ">
            <li class="nav-item active">
                <a class="nav-link" href="{% url 'budgetdb:login' %}?next={% url 'budgetdb:home' %}">Login</a>
            </li>
            <li class="nav-item active">
                    <a class="nav-link" href="{% url 'budgetdb:signup' %}?next={% url 'budgetdb:home' %}">Register</a>
            </li>
        </ul>
    </div>
    {% endif %}
</nav>

<!-- instructions Modal -->
{% include "budgetdb/_instructions_modal.html" %}